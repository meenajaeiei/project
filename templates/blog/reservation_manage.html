{% extends 'base.html' %}

{% block content %}
<div class="container">

    <h1 class="my-4">Request
        <small>Pending</small>
    </h1>

    {% for re in res %}
    <form action="" method="POST">
    {% csrf_token %}
        <!-- Page Content -->
        <div class="row">
            <div class="col-md-7">
              <a>
                <img class="img-fluid rounded mb-3 mb-md-0" src="http://placehold.it/700x300?text=Your+room+here+(700x300)" alt="">
              </a>
            </div>
            <div class="col-md-5">
              <h3>{{ re.room }}</h3>
              <p>
                <b>ผู้ร้องขอการเช่า:</b> {{re.student}} <br></h1>
                <b>วันเวลาที่ทำการจอง:</b> {{re.day_of_reserve}} <br>
                <b>ทำการจอง ตั้งแต่</b> {{re.duration_begin}} <b>ถึง</b> {{re.duration_end}} <br>
                <b>เหตุผลการขอจอง:</b> {{re.reason_of_reserve}}<br>
                <b>การอนุมัติ</b>
                 <li> <b>อาจารย์ที่ปรึกษา:</b> {{re.teacher}}</li>
                 <li>  <b>เจ้าหน้าที่:</b> {{re.staff}}</li>
                 เหตุผล: <input type="text" name="reason" placeholder="กรุณาใส่เหตุผล">
              </p>
              <input type="hidden" id="resno" name="resno" value="{{re.id}}">
              <button id="acceptBtn" onclick="acceptButton('{{re.id}}')" value="accepted" name="accepted">accept</button> 
              <button id="deniedBtn" onclick="deniedButton('{{re.id}}')" value="denied" name="denied">Denied</button> 
            </div>
        </div>

        <hr>

    </form>

    {% endfor %}

</div>

    <script>
        function acceptButton(reserveId){
            var val;
            var action = confirm("Accepted?");
            if (action){
                val = reserveId + " accepted";
                document.getElementById("acceptBtn").value = val;
            } else {
                val = reserveId + " cancel";
                document.getElementById("acceptBtn").value = val;
            }
            
        }
        
        function deniedButton(reserveId){
            var val;
            var action = confirm("Denied?");
            if (action){
                val = reserveId + " denied";
            } else {
                val = reserveId + " cancel";
            }
            document.getElementById("deniedBtn").value = val;
        }
    </script>

{% endblock %}
